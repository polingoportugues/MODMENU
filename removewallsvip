-- Remove Walls VIP Script (GitHub) - VERS√ÉO CORRIGIDA 2.0
-- Roblox - Remove VIPWalls Folder and all VIP_Part inside
-- by ANXIIE

print("üîÑ [GitHub] Carregando Remove Walls VIP Script v2.0...")

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- ========================================
-- VARI√ÅVEIS GLOBAIS DE COMUNICA√á√ÉO
-- ========================================

_G.removeWallsVIPAtivo = _G.removeWallsVIPAtivo or false

-- ========================================
-- TABELAS DE CONTROLE
-- ========================================

local wallsRemovidas = {}
local pastaVIPWallsRemovida = false
local conexaoMonitoramento = nil

-- ========================================
-- FUN√á√ïES DE REMO√á√ÉO DE WALLS
-- ========================================

local function removerPastaVIPWalls()
    -- Procurar a pasta VIPWalls no Workspace
    local pastaVIPWalls = Workspace:FindFirstChild("VIPWalls")
    
    if pastaVIPWalls then
        print("üìÅ Pasta VIPWalls encontrada!")
        print("üóëÔ∏è Removendo pasta VIPWalls e todo seu conte√∫do...")
        
        pcall(function()
            pastaVIPWalls:Destroy()
        end)
        
        pastaVIPWallsRemovida = true
        print("‚úÖ Pasta VIPWalls REMOVIDA com sucesso!")
        return true
    else
        print("‚ö†Ô∏è Pasta VIPWalls n√£o encontrada no Workspace")
        return false
    end
end

local function removerVIPPart(part)
    if not part or not part.Parent then return end
    
    -- Verificar se j√° foi removida
    if wallsRemovidas[part] then return end
    
    -- Marcar como removida
    wallsRemovidas[part] = true
    
    -- Remover a part
    pcall(function()
        part:Destroy()
    end)
    
    print("üß± VIP_Part removida:", part.Name)
end

local function procurarERemoverTodasVIPWalls()
    if not _G.removeWallsVIPAtivo then return end
    
    local totalRemovido = 0
    
    -- M√©todo 1: Tentar remover a pasta inteira VIPWalls
    if removerPastaVIPWalls() then
        totalRemovido = totalRemovido + 1
    end
    
    -- M√©todo 2: Procurar qualquer VIP_Part no Workspace inteiro
    for _, descendant in pairs(Workspace:GetDescendants()) do
        if _G.removeWallsVIPAtivo then
            if descendant:IsA("BasePart") or descendant:IsA("Model") or descendant:IsA("Folder") then
                local nome = descendant.Name
                
                -- Verificar se √© uma VIP Wall ou VIP Part
                if nome == "VIP_Part" or 
                   nome == "VipWall" or 
                   nome == "VipWall_PLUS" or 
                   nome == "VIPWalls" or
                   nome:match("VIP") or 
                   nome:match("Vip") then
                    
                    if descendant:IsA("BasePart") then
                        removerVIPPart(descendant)
                        totalRemovido = totalRemovido + 1
                    elseif descendant:IsA("Folder") or descendant:IsA("Model") then
                        print("üìÅ Removendo container VIP:", nome)
                        pcall(function()
                            descendant:Destroy()
                        end)
                        totalRemovido = totalRemovido + 1
                    end
                end
            end
        end
    end
    
    print("‚úÖ [GitHub] Varredura completa! Total removido:", totalRemovido)
end

local function monitorarNovasVIPWalls()
    if conexaoMonitoramento then
        conexaoMonitoramento:Disconnect()
        conexaoMonitoramento = nil
    end
    
    if not _G.removeWallsVIPAtivo then return end
    
    -- Monitorar novos objetos adicionados ao Workspace
    conexaoMonitoramento = Workspace.DescendantAdded:Connect(function(descendant)
        if not _G.removeWallsVIPAtivo then return end
        
        task.wait(0.1) -- Pequeno delay
        
        if descendant:IsA("BasePart") or descendant:IsA("Model") or descendant:IsA("Folder") then
            local nome = descendant.Name
            
            if nome == "VIP_Part" or 
               nome == "VipWall" or 
               nome == "VipWall_PLUS" or 
               nome == "VIPWalls" or
               nome:match("VIP") or 
               nome:match("Vip") then
                
                print("üÜï Nova VIP Wall detectada:", nome)
                
                if descendant:IsA("BasePart") then
                    removerVIPPart(descendant)
                else
                    pcall(function()
                        descendant:Destroy()
                    end)
                    print("üìÅ Container VIP removido:", nome)
                end
            end
        end
    end)
    
    -- Monitorar se a pasta VIPWalls for recriada
    local monitorPasta = Workspace.ChildAdded:Connect(function(child)
        if not _G.removeWallsVIPAtivo then return end
        
        if child.Name == "VIPWalls" then
            print("üÜï Pasta VIPWalls detectada novamente!")
            task.wait(0.1)
            removerPastaVIPWalls()
        end
    end)
    
    print("üëÅÔ∏è [GitHub] Monitoramento de VIP Walls ativado")
end

-- ========================================
-- FUN√á√ïES DE CONTROLE GLOBAL
-- ========================================

function _G.ativarRemoveWallsVIPGitHub()
    print("üîÑ [GitHub] Ativando Remove Walls VIP...")
    
    _G.removeWallsVIPAtivo = true
    
    -- Limpar tabelas
    wallsRemovidas = {}
    pastaVIPWallsRemovida = false
    
    -- Procurar e remover walls existentes
    procurarERemoverTodasVIPWalls()
    
    -- Ativar monitoramento de novas walls
    monitorarNovasVIPWalls()
    
    print("‚úÖ [GitHub] Remove Walls VIP ATIVADO!")
    print("üéÆ Todas as VIP Walls foram removidas do mapa!")
end

function _G.desativarRemoveWallsVIPGitHub()
    print("‚èπÔ∏è [GitHub] Desativando Remove Walls VIP...")
    
    _G.removeWallsVIPAtivo = false
    
    -- Desconectar monitoramento
    if conexaoMonitoramento then
        conexaoMonitoramento:Disconnect()
        conexaoMonitoramento = nil
    end
    
    -- Limpar tabelas
    wallsRemovidas = {}
    pastaVIPWallsRemovida = false
    
    print("‚úÖ [GitHub] Remove Walls VIP DESATIVADO!")
    print("‚ö†Ô∏è As VIP Walls podem reaparecer ao recarregar o jogo")
end

-- ========================================
-- AUTO-INICIALIZA√á√ÉO
-- ========================================

-- Se a vari√°vel global j√° estiver ativa quando o script carregar
if _G.removeWallsVIPAtivo then
    print("üîÑ [GitHub] Remove Walls VIP j√° estava ativo - Reinicializando...")
    _G.ativarRemoveWallsVIPGitHub()
end

print("‚úÖ [GitHub] Remove Walls VIP Script v2.0 carregado!")
print("üìã Informa√ß√µes:")
print("   - Remove a pasta 'VIPWalls' inteira")
print("   - Remove todos os 'VIP_Part' do mapa")
print("   - Monitora e remove novas VIP Walls automaticamente")
print("üéÆ Aguardando comandos da GUI...")
